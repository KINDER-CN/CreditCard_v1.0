<!DOCTYPE html>
<!-- saved from url=(0066)https://creditcard.ecitic.com/citiccard/ebankpc/settingManage.html -->
<html lang="zh-cn">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<meta http-equiv="Expires" content="0">
		<meta http-equiv="Pragma" content="no-cache">
		<meta name="renderer" content="webkit|ie-comp|ie-stand">
		<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
		<title>设置管理-通用设置</title>
		<link rel="shortcut icon" href="https://creditcard.ecitic.com/citiccard/ebankpc/logo.ico">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="css/settingManage.7e62b685.css" rel="stylesheet">
		<style type="text/css">
			.spa{
				color: red;
			}
		</style>
	</head>

	<body>
	<div id="unhang">
		<div class="header">
			<div class="content">
				<a href="http://creditcard.ecitic.com/" title="中信银行信用卡中心官网" target="_blank" class="logo-area">
					<img src="img/logo白色.png">
				</a>
				<div class="menu-area">
					<span>欢迎您，<strong id="userName">{{name}}</strong></span>
					<span class="line">|</span>
					<img class="online-server" id="online-server-img" src="img/kf.gif" alt="在线客服">
					<span class="line">|</span>
					<img class="security-logout" src="img/gb.gif" alt="安全退出" id="logout">
				</div>
			</div>
		</div>
		<div class="menu">
			<ul>
				<li class="yahei" id="yahei01">
					<a href="http://10.1.12.66:8086/client/loginIndex.html" class="wdzh" target="_self">我的账户</a>
				</li>
				<li class="yahei" id="yahei02">
					<a href="http://10.1.12.66:8086/trading/client/bill.html" class="zdcx" target="_self">账单查询</a>
				</li>
				<li class="yahei" id="yahei03">
					<a href="http://10.1.12.66:8086/trading/client/repay.html" class="xykhk" target="_self">信用卡还款</a>
				</li>
				<li class="yahei" id="yahei04">
					<a href="http://10.1.12.66:8086/trading/client/aging.html" class="fqyw" target="_self">分期业务</a>
				</li>
				<li class="yahei" id="yahei07">
					<a href="http://10.1.12.66:8086/trading/client/creditCardManger.html" class="szgl" target="_self">设置管理</a>
				</li>
			</ul>
		</div>

		<div class="main_top">
			<img style="padding-left:793px; margin-top: -7px" src="img/jt.gif">
		</div>
		<div class="main" id="mainSettingManage">
			<div class="sub_menu">
				<a class="hover" href="device.html" target="_self">基本信息</a>
				<a href="creditCardManager.html" target="_self">信用卡管理</a>
			</div>
			<div class="password_reset" id="passwordSet" style="">
				<div class="title password_set_title">信用卡挂失</div>
				<div class="password_set_content" id="reportLoss">
					<div v-for="(ccs,index) in showCard">
						<div class="password_set_card" id="passwordSetCard">
							<div class="card_content" style="float: left">
								<div class="card_sub_content" style="background:#336699;">
									<p class="card_desc" style="height: 34px;">{{ccs.cardType}}</p>
									<p class="card_tail">{{ccs.cardNum}}</p>
									<p style="border: 1px solid #FFFFFF;
										width: 50px; height: 23px; text-align: center;
										margin-left: 21px;">{{ccs.cardState}}
									</p>
									<p class="card_logo"><img src="img/yinlian.gif" width="75" height="44"></p>
								</div>
								<p class="select_card" style="display: block;"></p>
							</div>
						</div>
					</div>
					<span class="xing">*</span>身份证号<br />
						<input class="pad" type="text" name="clientIDcard" maxlength="18" @blur="blur1"
							v-model="reportLossCard.clientIDcard" id="clientIDcard" placeholder="18位数的身份号码" />
							<span class="spa">{{a}}</span>
							<span v-text="msgs.msg1" class="spa spa2"></span>
					<br /> 
					<span class="xing">*</span>手机号码<br />
						<input class="pad" type="text" name="cardPhone" maxlength="11" @blur="blur2"
							v-model="reportLossCard.cardPhone" id="cardPhone" placeholder="11位数字的手机号码" />
							<span class="spa">{{b}}</span>
							<span v-text="msgs.msg2" class="spa spa2"></span>
					<br />
					<span class="xing">*</span>验证码<br />
						<input class="pad" style="width: 70px;" type="text" name="code" 
						 	maxlength="6" placeholder="6位数验证码"/>
						<span class="spa spa3"></span>
					<button style="margin-top: -5px; width: 76px;"
						type="button" id="but"
						class="btn btn-danger btn-sm">&nbsp;免费获取&nbsp;
					</button>
					<div class="password_set_btn">
						<button type="button" id="but" class="btn btn-danger btn-sm"
						@click="reportLossCreditCard()">
							&nbsp;&nbsp;&nbsp;&nbsp;确 定&nbsp;&nbsp;&nbsp;&nbsp;
						</button>
					</div>
				</div>
			</div>
		</div>
		<div id="tishi" style="float: left; margin-top: 20px; margin-left: 584px;">
				<span style="color: #E60008; font-size: 16px;">注意事项：</span><p><br />
				<span style="font-size: 15px;">
				● 不确定信用卡是否已经丢失的情况下，建议先申请信用额度冻结。<br style="margin-bottom: 10px;">
				● 信用卡挂失及时生效，不可撤销。<br style="margin-bottom: 10px;">
				● 电话申请信用卡挂失不受地域、时间限制，非常方便。<br style="margin-bottom: 10px;">
				● 信用卡挂失后如果确定不想使用了，可致电客服申请注销卡片。<br style="margin-bottom: 10px;">
				● 如果信用卡挂失前已被盗刷，则看能否要求银行或商户赔偿损失。<br style="margin-bottom: 10px;">
				● 补办的新卡，卡号会发生变化，如果是网银用户，应重新绑定签约网银。
				</span>
		</div>
		<div class="footer" style="margin-top: 350px;">
			<ul class="footer_list">
				<li class="footer_cr">
					<p>CCMS信用卡股份有限公司授权所有Copyright 2002-2019 CITIC BANK ALL rights reserved</p>
					<p>京公网安备11010502020433号 京ICP证 030779-1号</p>
				</li>
				<li class="footer_line">
					<p class="tip">24小时客服热线</p>
					<p class="number">40088 - 95558</p>
				</li>
				<li class="footer_client" id="footer_client">
					<a><img id="my_footer" src="img/kf_icon.png" alt="客服"></a>
					<p>在线客服</p>
				</li>
			</ul>
		</div>
	</div>
		<script src="js/settingManage.7e62b685.js"></script>
		<script type="text/javascript" src="js/sdll.vendors.47a4bc191c19df35baf4.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
		<script type="text/javascript" src="js/vuejs-2.5.16.js"></script>
		<script type="text/javascript" src="js/axios-0.18.0.js"></script>
		<script src="https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
		<script type="text/javascript">
		new Vue({
            el:'#unhang',
            data:{
            	creditCard:{
            		id:'',
            		cardNum:'',
            		cardValidity:'',
            		cardSecurityCode:'',
            		cardPhone:''
            	},
            	reportLossCard:{
            		id:'',
            		cardNum:'',
            		clientIDcard:'',
            		cardPhone:''
                },
                showCard:[],
                name:'',
                a:'',
				b:'',
				names: "@blur_61",
                msgs:{}
            },
            
            methods:{
            	blur1(){
                	var _this=this;
            		var num=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
            		if(_this.reportLossCard.clientIDcard==""){
            			this.a="*身份证号码不能为空！";
            			return false
            		}
            		if(!num.test(_this.reportLossCard.clientIDcard)){
            			this.a="*身份证号码格式错误！";
            			return false
            		}
            		if(_this.reportLossCard.clientIDcard!=""){
            			this.a="";
            		}
            		if(num.test(_this.reportLossCard.clientIDcard)){
            			this.a="";
            		}
                },
                blur2(){
                	var _this=this;
                	var tex=/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/;
                	if(_this.reportLossCard.cardPhone==""){
                		this.b="*手机号码不能为空！";
            			return false
            		}
            		if(!tex.test(_this.reportLossCard.cardPhone)){
            			this.b="*手机号码格式错误！";
            			return false
            		}
            		if(_this.reportLossCard.cardPhone!=""){
                		this.b="";
            		}
            		if(tex.test(_this.reportLossCard.cardPhone)){
            			this.b="";
            		}
                },
            	selectCreditCardById: function(){
            		var _this=this;
            		var idc= GetQueryString("id")
            		var id=_this.reportLossCard.id;
            		axios.get('http://10.1.12.66:8086/cardmanger/selectCreditCardById',{params:{id:idc}})
            		 .then(function (response) {
            			_this.showCard = response.data.scs;
            			_this.name=response.data.name;
            			_this.creditCard.cardNum=response.data.cc.cardNum;
            			_this.reportLossCard.cardNum=_this.creditCard.cardNum;
                        _this.creditCard=response.data.cc;
                        	console.log(response.data.cc);
                      })
            	},
            	reportLossCreditCard(){
            		var _this=this;
            		if(_this.reportLossCard.clientIDcard=="" ||
            				_this.reportLossCard.cardPhone==""){
            			if(_this.reportLossCard.clientIDcard==""){
                			this.a="*身份证号码不能为空！";
                		}
            			if(_this.reportLossCard.cardPhone==""){
                    		this.b="*手机号码不能为空！";
                		}
            			alert("请先填写完信息，再提交！")
            		}else{
            			axios.get('http://10.1.12.66:8086/cardmanger/reportLossCreditCard',{'params':{
                        	'id':_this.reportLossCard.id,
                        	'cardNum':_this.reportLossCard.cardNum,
                			'clientIDcard':_this.reportLossCard.clientIDcard,
                			'clientPhone':_this.reportLossCard.cardPhone}
                			})
                			.then(res=>{
    				    	    console.log(res.data)
    				    	    this.msgs=res.data
    				    	    if(this.msgs.no==400){
    				    	    	alert("挂失失败！只有已激活的信用卡才能挂失！")
    				    	    	document.location="http://10.1.12.66:8086/cardmanger/creditCardManager.html";
    				    	    }
    				    	    if(this.msgs.ok==200){
    				    	    	alert("挂失成功！")
    				    	    	document.location="http://10.1.12.66:8086/cardmanger/creditCardManager.html";
    				    	    }
    				    	})
                          .catch(function (error) {
                            console.log(error);
                        })
            		}
                    
                }
            },
            created:function(){
            	this.selectCreditCardById();
            	this.reportLossCard.id = localStorage.getItem("cid");
            	console.log(this.reportLossCard.id)
            },
        });
		function GetQueryString(name){
		     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
		     var r = window.location.search.substr(1).match(reg);
		     if(r!=null)return  unescape(r[2]); return null;
		}
		</script>
		
	</body>

</html>